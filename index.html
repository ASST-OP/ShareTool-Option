<!DOCTYPE html>
<html>
<head>
    <title>半自動共有ツール(オプション)</title>
    <style> 

body {
  font-family: Arial, sans-serif;
}

input, button {
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 5px;
  border: none;
}

input[type="number"] {
  width: 200px;
}

input[type="text"], input[type="number"] {
  font-size: 16px;
}

button {
  background-color: #4CAF50;
  color: white;
  cursor: pointer;
}

button:hover {
  background-color: #45a049;
}

#selectContainer {
  margin-bottom: 10px;
}

</style>
</head>
<body>
    <input id="password" placeholder="パスワード">
    <input type="number" id="selectCount" placeholder="オプションの作成">
    <button id="addSelectButton">セレクトを作成</button>
    <div id="selectContainer"></div>
    <input type="number" id="redirectInterval" placeholder="共有の間隔（ミリ秒）">
    <button id="startRedirectButton">半自動共有開始</button>
    <button id="stopRedirectButton">共有停止</button>

    <script>
        let redirectTimer;
        const selectContainer = document.getElementById("selectContainer");

        const passwords = ["NameTool001", ""]; // 複数のパスワードを配列で管理

        document.getElementById("addSelectButton").addEventListener("click", function() {
            const selectCount = parseInt(document.getElementById("selectCount").value);
            
            if (!isNaN(selectCount) && selectCount > 0) {
                selectContainer.innerHTML = ""; // 既存のセレクトボックスをクリア

                for (let i = 1; i <= selectCount; i++) {
                    const select = document.createElement("select");
                    select.id = `redirectSelect${i}`;
                    select.innerHTML = `
                        <option value="https://liff-tool.f5.si/">テスト1</option>
                        <option value="https://example.com">リダイレクト先 2</option>
                    `;
                    selectContainer.appendChild(select);
                }
            } else {
                alert("セレクトの数を正しく指定してください.");
            }
        });

        document.getElementById("startRedirectButton").addEventListener("click", function() {
            const enteredPassword = document.getElementById("password").value;

            // 入力されたパスワードが passwords 配列に含まれているかチェック
            if (passwords.includes(enteredPassword)) {
                const redirectInterval = parseInt(document.getElementById("redirectInterval").value); // ミリ秒単位

                if (redirectInterval > 0) {
                    const selects = selectContainer.querySelectorAll("select");

                    redirectTimer = setInterval(function() {
                        selects.forEach((select, index) => {
                            const selectedIndex = select.selectedIndex;
                            if (selectedIndex !== -1) {
                                const selectedOption = select.options[selectedIndex];
                                const redirectUrl = selectedOption.value;
                                window.location.href = redirectUrl;
                            }
                        });
                    }, redirectInterval);

                    alert("半自動共有が開始されました。");
                } else {
                    alert("共有の間隔を正しく設定してください.");
                }
            } else {
                alert("パスワードが正しくありません。");
            }
        });

        document.getElementById("stopRedirectButton").addEventListener("click", function() {
            clearInterval(redirectTimer);
            alert("リダイレクトが停止されました。");
        });
    </script>
</body>
</html>